// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Opdracht {
  id                      String    @id @default(cuid())

  // Basis info (altijd verplicht)
  titel                   String    // bijv "Senior React Developer"
  bedrijf                 String    // bijv "Coolblue"
  omschrijving            String    // max 3-4 regels

  // Financieel (1 vast tarief)
  uurtarief               Int       // in euros, bijv 100 = â‚¬100/uur

  // Locatie (simpel, 1 veld)
  locatie                 String    @default("Remote") // Remote, Hybride, OnSite
  locatie_detail          String?   // bijv "Amsterdam" (alleen bij Hybride/OnSite)

  // Tijd (vaste getallen, geen ranges)
  uren_per_week           Int?      // bijv 32
  duur_maanden            Int?      // bijv 6

  // Team
  teamgrootte             String?   // bijv "2-5" of "10+"

  // Contact
  plaatser_naam           String
  plaatser_whatsapp       String    // format: +31612345678

  // Status
  status                  String    @default("OPEN") // OPEN, INGEVULD
  edit_token              String    @unique // voor delete/edit zonder auth

  // Relations
  reacties                Reactie[] // wordt NIET getoond, alleen geteld

  // Timestamps
  created_at              DateTime  @default(now())
  updated_at              DateTime  @updatedAt

  @@index([status])
  @@index([created_at])
}

model Reactie {
  id                      String    @id @default(cuid())
  opdracht_id             String
  naam                    String
  bericht                 String?
  whatsapp_nummer         String?
  created_at              DateTime  @default(now())

  // Relations
  opdracht                Opdracht  @relation(fields: [opdracht_id], references: [id], onDelete: Cascade)

  @@index([opdracht_id])
}
